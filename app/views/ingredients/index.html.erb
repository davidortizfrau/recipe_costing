<h1 class="page-header">
  Ingredients 
  <%= link_to 'New Ingredient', new_ingredient_path, class: "btn btn-default pull-right" %>
</h1>

<div class="row">

  <% @categories.each do |category| %>
    
    <% if @ingredients.where(category: category.humanize).any? %>
      <div class="col-md-6">
        <div class="panel panel-primary">
          <div class="panel-heading"><%= category.humanize %></div>
          <div class="panel-body">
            <div class="table-responsive">
              <table class="table table-striped table-condensed">
                  <thead> 
                    <tr>
                      <th>Name</th>
                      <th>Price / Unit</th>
                      <th>Yield</th>
                      <th>Oz/Cup</th>
                      <th></th>
                      <th></th>
                    </tr>
                  </thead>
                    
              
                
                <% @ingredients.where(category: category.humanize).each do |ingredient| %>
                  
                  <tr>
                    <td><%= ingredient.name %></td>

                    <% if ingredient.price %>
                      <td><%= number_to_currency(ingredient.price) %> / <%= ingredient.unit %></td>
                    <% else %>
                      <td>-</td>
                    <% end %>

                    <% if ingredient.yield %>
                      <td><%= number_to_percentage(ingredient.yield, options = { precision: 0}) %></td>
                    <% else %>
                      <td>-</td>
                    <% end %>
                      
                    
                    <% if ingredient.ounces_per_cup %>
                      <td><%= ingredient.ounces_per_cup %> oz</td>
                    <% else %>
                      <td>-</td>
                    <% end %>
                    
                    <td><%= link_to 'Edit', edit_ingredient_path(ingredient) %></td>
                    <td><%= link_to 'Delete', ingredient, method: :delete, data: { confirm: 'Are you sure?' } %></td>
                  </tr>
                  

                <% end %>
              

              </table>
            </div>
          </div>
        </div>
      </div>
    <% end %>           
  <% end %>
</div>



